---
title: "[땡땡능력시험] 페이지 이너 및 셀렉트"
date: 2022-09-01
categories:
  - <Projects>
tags:
  - "'땡땡능력시험'"
  - (Devlog)
---

[PR] - https://github.com/YuchanJeong/ddangddang-avility-test/pull/5

## PageInner

브라우저의 높이에서 헤더와 푸터의 높이를 빼서 푸터 아래의 공간이 보이는 것을 막음

<img width="800" alt="페이지 이너" src="https://user-images.githubusercontent.com/84524514/187863869-a11eb35d-9b1c-4bf1-962e-4be5604ab9e6.png">

```ts
/** \# 최대 넓이 1200px, 최소 넓이 320px인 가로 가운데 정렬된 공간 */
export const InnerBox = styled.div`
  width: 1200px; //> 최대 넓이
  max-width: 100%; //> 1200px 이하일 때
  margin: 0 auto; //> 가로 가운데 정렬
  position: relative;
  min-width: 320px;
`;

/** \# 최대 넓이 1200px, 최소 넓이 320px인 가로 가운데 정렬된 공간 / 헤더 및 푸터에 따라 높이 조정 */
export const PageInnerBox = styled(InnerBox)`
  padding: ${({ theme }) => theme.size.lg};
  min-height: calc(100vh - 17rem);
`;
```

## Select

- 기존 select
  <img width="450" alt="select 기존" src="https://user-images.githubusercontent.com/84524514/187881064-5d9e9dec-cb77-4b34-8511-269531809a9f.png">
- 스타일 적용 select
  <img width="450" alt="select 수정" src="https://user-images.githubusercontent.com/84524514/187881417-17c8b858-95b6-4872-8a6d-77a4771d8189.png">

\*좌측 Safari, 우측 Chrome

### useSelect

```ts
/**
 * \# select 요소 값 관리
 *
 * e.g.
 *
 * const exampleSelect = useSelect(EXAMPLES[0])
 *
 * \<select {...exampleSelect.attribute}>
 *
 * {EXAMPLES.map((ex) => (<option key={ex}>{ex}</option>))}
 *
 * </ select>
 * @param initialValue 초깃값
 * @returns \{ `attribute`: select 요소의 속성, `value`: 선택된 값, `setValue`: 값 직접 변경 시 사용 }
 */
export const useSelect = (initialValue: string): IUseSelectResult => {
  const [value, setValue] = useState(initialValue);

  const onChange = (ev: ChangeEvent<HTMLSelectElement>) => {
    if (ev.target.value !== value) setValue(ev.target.value);
  };

  return {
    attribute: { value, onChange },
    value,
    setValue,
  };
};
```

```ts
export interface IUseSelectResult {
  attribute: {
    value: string;
    onChange: (ev: ChangeEvent<HTMLSelectElement>) => void;
  };
  value: string;
  setValue: Dispatch<SetStateAction<string>>;
}
```

### select 기본 스타일 제거

```scss
//^IE
select::-ms-expand {
  display: none;
}
//# SELECT 기본 스타일 제거
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}
```

### Select 컴포넌트

- 이전에는 select의 화살표에 `background-image` 사용
- 이번에는 여러 태마에 대응하기 위해 위치를 조정한 문자("V") 사용
- `z-index`로 select 클릭이 가능하게 함
- `background-color: transparent;`로 화살표가 보이게 함
- `padding-right`로 내용이 화살표를 안가리게 함

```ts
//# select 스타일
const SelectStyle = styled.select<Pick<ISelect, "width">>`
  width: ${({ width }) => width};
  padding: ${({ theme }) => theme.size.sm};
  padding-right: ${({ theme }) => theme.size.lg};
  border-radius: ${({ theme }) => theme.size.br};
  background-color: transparent; //> ArrowStyle 보임
  color: ${({ theme }) => theme.colors.text};
  cursor: pointer;
`;

//# select 화살표 스타일
const ArrowStyle = styled.span`
  position: absolute;
  transform: translate(-2rem, 0.6rem);
  z-index: -1; //> SelectStyle 클릭 가능
`;

/**
 * \# Select & Option
 * @param width `string` select 넓이
 * @param list `string[]` option 목록
 * @param select `{ attribute, value, setValue }` useSelect의 반환값
 */
export function Select(props: ISelect) {
  return (
    <div>
      <SelectStyle width={props.width} {...props.select.attribute}>
        {props.list.map((el) => (
          <option key={el}>{el}</option>
        ))}
      </SelectStyle>
      <ArrowStyle>▼</ArrowStyle>
    </div>
  );
}
```

### 사용 예시

```ts
export function Create() {
  const EXAMPLES = ["1번 목록입니다.", "2번 목록입니다.", "3번 목록입니다."]; //!
  const select = useSelect(EXAMPLES[0]);

  return (
    <PageInnerBox>
      <Select width="14rem" list={EXAMPLES} select={select} />
    </PageInnerBox>
  );
}
```

## LINK 컴포넌트 에러 🐞

[Issue] - https://github.com/YuchanJeong/ddangddang-avility-test/issues/4

**\# 문제**

```bash
Warning: Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?
```

**\# 해결**

Link 컴포넌트 자식 요소로 컴포넌트가 직접 오게되면 발생하는 문제라 Fragment 요소로 감싸서 해결

```ts
<Link href={"https://github.com/YuchanJeong/ddangddang-avility-test"}>
  <>
    <FaGithub />
  </>
</Link>
```

[[참조]](https://github.com/vercel/next.js/issues/7915) - Using functional components as child of \<Link/> causes ref-warnings
